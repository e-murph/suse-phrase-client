= 仪表板小部件
:revdate: 2025-11-24
:page-revdate: {revdate}
:description: 利用各种小工具将资源中的数据可视化。

小工具是仪表盘的组成部分。它们可视化数据，通常来自一个或多个 Kubernetes 资源。小工具还可以向仪表盘的查看者显示静态文本信息。

== 添加新部件

您可以通过两种方式之一添加新部件：

* 单击仪表板右上角的*添加小部件*按钮。

* 在空的仪表板上，单击屏幕中间的*添加小工具*部分。这时会打开一个抽屉，您可以在其中配置新部件。

image::dashboards/add-a-widget.png[添加小工具的不同方法]

== 添加现有部件

在{stackstate-product-name} 中查看单个组件时，可以使用 "更多操作 "菜单并选择 "添加到仪表盘"，将图表直接添加到仪表盘中。

image::dashboards/add-existing-widget.png[添加现有部件]

通过单个部件上相同的 "更多操作 "菜单，也可对任何固定项目进行操作。

此外，您还可以使用固定项目抽屉中的 "更多操作 "或单击抽屉底部的 "将所有项目添加到仪表板 "按钮，将所有固定项目添加到仪表板。

image::dashboards/add-all-pinned-items.png[添加所有固定项目]

由此产生的仪表板中的小部件会有一个链接，指向添加小部件的资源。

== 配置小工具

每个部件都有许多配置选项。有些是所有部件共有的，有些则基于部件类型。

要编辑部件的配置，请使用 "更多操作 "菜单并选择 "编辑部件"。

image::dashboards/configure-a-widget.png[添加所有固定项目]

=== 常用部件字段

|===
| 字段名称 | 说明

| 名称
| 小工具标题中显示的简短描述性名称。

| 说明
| 附加详细信息显示在工具提示后面的 widget 标题中。

| 类型
| <<types, 可视化类型>>。
|===

除了这些字段外，所有 widget 还有一些共同的选项卡：

|===
| 选项卡名称 | 说明

| 链接
| 相关资源链接，显示在 widget 名称下方。始终显示第一个链接。其他链接在下拉菜单中提供。

| YAML
| 小部件的原始 YAML 配置，可以查看和编辑。
|===


=== 查询选项卡

用于显示资源数据的小工具类型将有一个 "*查询 "*选项卡。您可以添加一个或多个 PromQL 查询，以获取 widget 的数据。


=== 类型 [[types]]

==== TimeSeriesChart

`TimeSeriesChart` 可在折线图中直观显示时间序列数据。部件配置中的每个查询都会在图表上生成一条线。

image::dashboards/time-series-chart-example.png[时间序列图示例]

您可以配置以下设置：

* *图例*- 图例的位置和模式。
* **可视化**- 连接空值以创建一条连续的线。
* **Y 轴**- Y 轴的单位、标签和最小/最大值。
* **阈值**- 在图表中添加水平线，以标记重要的数值阈值。

==== BarChart

`BarChart` 以条形图显示时间序列数据。它的图例、Y 轴和阈值设置与`TimeSeriesChart` 相同。

image::dashboards/bar-chart-example.png[条形图示例]

==== StatChart

`StatChart` 显示的是火花线图和单一数值，一目了然。可以对阈值进行配置，以便根据数值改变文本的颜色。

image::dashboards/gauge-chart-example.png[仪表图表示例]

您可以配置以下设置：

* **火花线**- 显示或隐藏火花线图。
* **Unit**- 值的**单位**。
* **小数**- 要显示的小数位数。
* **计算**- 从时间序列数据中计算数值的方法。

==== GaugeChart

`GaugeChart` 显示一个中间有数值的仪表。当数值越过临界值时，仪表的颜色和文字都会改变。

image::dashboards/stat-chart-example.png[统计图示例]

您可以配置以下设置：

* **Unit**- 值的**单位**。
* **小数**- 要显示的小数位数。
* **Max**- 测量仪的最大值。
* **计算**- 从时间序列数据中计算数值的方法。

==== Markdown

`Markdown` widget 显示标记符文本。可用于在仪表板上添加说明或其他信息。

image::dashboards/markdown-chart-example.png[标记图示例]
