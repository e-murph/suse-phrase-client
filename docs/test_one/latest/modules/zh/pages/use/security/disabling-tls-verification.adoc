= 禁用 TLS 验证
:revdate: 2025-08-25
:page-revdate: {revdate}
:description: SUSE Observability 自助托管

== SUSE Observability Agent

要禁用xref:/use/security/self-signed-certificates.adoc#_suse_observability_agent[SUSE Observability Agent] 的 SSL 验证，需要如下所示配置 Helm 字符串值：

[,bash]
----
--set-string 'global.skipSslValidation'=true \
----

== SUSE Observability CLI

要通过xref:/use/security/self-signed-certificates.adoc#_suse_observability_cli[SUSE Observability CLI] 禁用 SSL 验证，需要使用`sts CLI` 命令指定`--skip-ssl` 标志。可以使用以下两种方法之一来实现：

*方法 1*：

在 PEM 编码 CA 证书文件中指定`--skip-ssl` 标志，以便进行持久配置：

[,bash]
----
sts context save \
 --name staging \
 --url https://staging.internal \
 --api-token YOUR_API_TOKEN \
 --skip-ssl
----

*方法 2*：

在任何用于一次性证书验证的 CLI 命令中指定`--skip-ssl` 标志：

[,bash]
----
# Using certificate file path
sts agent list \
 --url https://staging.internal \
 --api-token YOUR_API_TOKEN \
 —-skip-ssl


# Using base64-encoded certificate data
sts settings list \
 --url https://staging.internal \
 --api-token YOUR_API_TOKEN \
 —-skip-ssl
----

[WARNING]
====
使用`--skip-ssl` 标志将忽略`STS_CA_CERT_PATH` 和`STS_CA_CERT_BASE64_DATA` 设置。请谨慎使用，因为这会降低安全性。
====

== 针对 SUSE Observability 的 Rancher UI 扩展

要禁用 Rancher UI 扩展的 SSL 验证，需要更改`agent-tls-mode` 设置。

要通过用户界面更改设置值，请导航至 "全局设置 "页面，然后在页面底部找到`agent-tls-mode` 设置。通过用户界面更改设置后，在允许请求之前，会检查群集是否已将`AgentTlsStrictCheck` 条件设置为 "True"。这可以防止证书不匹配造成的中断。
