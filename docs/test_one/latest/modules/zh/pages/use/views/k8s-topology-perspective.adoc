= 拓扑视角
:revdate: 2025-07-10
:page-revdate: {revdate}
:description: SUSE 可观察性

== 概述

拓扑视角显示 IT 架构中的组件及其关系。

image::k8s/k8s-topology-perspective.png[拓扑视角]

== 图例

点击屏幕右下方的图例按钮（？）（就在缩放控制下方），显示拓扑可视化中使用的图标和颜色的解释。

image::k8s/k8s-topology-perspective-legend.png[拓扑透视图例]

== 组件

拓扑透视图显示所选xref:/use/views/k8s-view-structure.adoc[视图]中筛选出的组件和关系。配置了一个或多个xref:/use/alerting/k8s-monitors.adoc[监控器]的组件将报告经过计算的健康状态。

* 选择一个组件，在右侧面板详细信息选项卡 -*组件详细信息*中显示详细的组件信息。
* 将鼠标悬停在组件上可打开<<_component_context_menu,组件上下文菜单>>。

=== 组件上下文菜单

将鼠标指针悬停在组件上时，会显示组件上下文菜单。这将为您提供有关组件的信息，其中包括

* 组件名称和类型
* 健康状况
* 组件的特定<<_actions,操作>>
* 组件专用<<_shortcuts,快捷方式>>

image::k8s/k8s-component-contex-menu.png[组件上下文菜单]

=== 行动

可使用操作来扩展拓扑选择，以显示所选组件的所有依赖关系。其他操作可能适用于特定组件，例如作为 StackPack 的一部分安装的组件操作。

选择组件\--*组件详情*时，右侧面板详情选项卡中会列出可用*操作*的列表。将鼠标指针悬停在组件上时显示的组件上下文菜单中也会列出操作。

=== 捷径

通过快捷方式，您可以直接访问特定组件的详细信息：

* *打开组件视图*-*打开*该组件的xref:/use/views/k8s-component-views.adoc[组件视图]。组件视图可让你鸟瞰该组件及其直接相邻组件的所有重要信息，具体取决于你正在查看的组件类型。
* *探索组件*- 打开仅包含该组件的xref:/use/views/k8s-explore-views.adoc[探索视图]。通过探索视图，您无需调整视图筛选器，即可从所有角度对单个组件进行研究。双击一个组件也能达到同样的效果。
* *显示属性*- 弹出组件的属性窗口。这与显示组件详细信息时点击右侧面板*详细信息*选项卡中的 "*显示所有属性"（SHOW ALL PROPERTIES*）相同。

== 关系

关系显示拓扑结构中的组件是如何连接在一起的。它们用虚线或实线表示，箭头显示它们所链接组件之间的依赖关系方向。

* *直接关系*\--通过网络和任何其他形式的直接关系连接的组件
* *间接关系*- 因网络流量或其他依赖关系而产生的组件之间的关系，不包括与当前拓扑选择中不存在的外部组件之间的连接。
* *分组关系*- 直接关系和间接关系的组合，连接组件组中的一个或多个组件

选择一个关系，即可在右侧面板的详细信息选项卡中打开该关系的详细信息。

== 可视化设置

拓扑视角中组件和关系的显示方式可在可视化器右上角的可视化设置菜单中自定义。 可视化设置与视图一起保存。

=== 网格选项

拓扑视角中的组件可以选择以网格形式组织，层按行分组，域按列可视化。网格默认为打开。未选择网格选项时，不显示网格。

* *按层编排*- 在拓扑可视化中，同一层的组件会被放置在同一网格行中。禁用可从网格中删除行。
* *按域排列*- 在拓扑可视化中，同一域的组件被放置在同一网格列中。禁用可从网格中移除列。

例如，如果您的业务服务可视化堆栈来自四五个不同的来源，那么它们的来源（域）在可视化中就不那么重要了。在关闭*域组织的*情况下，可以很好地实现拓扑可视化。

=== 组件分组

大量组件的拓扑可视化可能会变得难以阅读。SUSE Observability 可在同一视图中将组件分组。分组可以将组件和关系的数量减少到视觉上更容易管理的程度。

分组功能默认已启用，并尊重所选的<<_grid_options,网格选项>>\--组件必须位于同一网格行/列中才能分组。

有三种分组方式，也可以选择不将组件分组：

* *无分组*-*没有*以任何方式对组件和关系进行分组。
* *自动分组*-*自动*调整分组设置，使可视化组件或组件组的数量保持在 35 个以下。
* *按状态和类型分组*- 将具有相同类型和相同健康状态的组件归为一组。如果其中一个分组组件的健康状态发生变化，不再符合组件组的健康状态，它就会跳出组件组。如果同一类型的其他组件具有相同的健康状态，则将创建一个新组。
* *按类型、状态和关系分组*- 与*按状态和类型分组*一样，将组件分组，同时保留与组外组件关系的信息。组中的所有组件都具有相同的源连接和目标连接。这一点非常有用，因为仅按状态和类型将组件分组可能会导致组内组件的某些关系信息丢失。

== 导航

=== 放大和缩小

拓扑可视化右下角有缩放按钮。*加号*按钮放大拓扑图，*减号*按钮缩小拓扑图。在这两个按钮之间有一个 "*适合屏幕*"按钮，可以放大整个拓扑结构。

=== 查找组件

单击`CTRL` +`SHIFT` +`F` 并键入组件名称的前几个字母，即可在拓扑结构中找到特定组件。或者，您也可以选择拓扑可视化右下角的 "*查找组件*"放大镜图标。

查看xref:/use/stackstate-ui/k8sTs-keyboard-shortcuts.adoc[SUSE Observability 键盘快捷键的]完整列表。

=== 显示根本原因

如果有组件在视图之外但可能影响视图中的组件，则 "拓扑视图 "将显示所有组件的健康状态。

* *不显示根本原因*- 不显示当前拓扑过滤器所显示组件的根本原因。
* *仅显示根本原因*-*仅*显示当前拓扑过滤器显示的组件的根本原因，这些组件的健康状况为`CRITICAL` 或`DEVIATING` 传播。如果一个组件直接依赖于至少一个导致根本原因的隐形组件，那么间接关系就会可视化。
* *显示完整的根源树*- 显示从当前拓扑筛选器显示的健康状况为`CRITICAL` 或`DEVIATING` 的组件到其根源的所有路径。

image::k8s/k8s-show-root-cause.png[根本原因]

== 列表模式

拓扑可视化中的组件也可以列表形式显示，而不是图表形式：

image::k8s/k8s-topology-perspective-list-mode.png[筛选（列表格式）]

=== 导出为 CSV

在列表模式下，可将组件列表导出为 CSV 文件。CSV 文件包括`name`,`state`,`type` 和`updated` 视图中每个组件的详细信息。

. 从拓扑视角，单击右上角的*列表模式*图标，以列表模式打开拓扑。
. 单击页面顶部的 "*下载为 CSV*"。
 ** 组件列表将以 CSV 文件的形式下载，文件名为`<view_name>.csv` 。
