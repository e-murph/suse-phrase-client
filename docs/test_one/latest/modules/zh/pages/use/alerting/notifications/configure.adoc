= 配置通知
:revdate: 2025-07-10
:page-revdate: {revdate}
:description: SUSE 可观察性

配置新通知的步骤如下：

* <<_create_a_new_notification,创建新通知>>
* <<_configure_when_to_notify,配置何时通知>>
* <<_where_to_send_notifications,定义应向何处发送通知>>

== 创建新通知

通过 SUSE Observability 用户界面汉堡菜单下半部分的链接打开通知页面。这将打开已配置的所有通知的概览，包括其状态。

您可以检查所需的通知是否已经存在。如果没有，请使用 "添加新通知 "按钮创建一个新通知。

== 配置何时通知

image::k8s/notifications-add-new-notification.png[添加新通知]

配置通知：

. 名称 - 选择一个简短但仍能描述通知意图的名称。供您在通知概览中参考。
. 状态 - 可以暂时禁用通知，以防不需要通知或通知太吵等情况。
. 何时通知 - 临界健康状态总是会触发通知，但也可选择包含偏离状态。
. 范围 - 在示例中，将发送默认 Kubernetes 命名空间中 pod 上所有监控器的健康状态。使用 "<<_scope,范围>>"部分中的可用筛选器来更改此选择。

=== 范围

有 4 种可能的范围筛选器。默认情况下，将为每个临界（可选偏差）健康状态发送通知。过滤器用于限制这一范围。只有当健康状态符合所有筛选条件时，才会发出通知。

* 显示器选择一个或多个特定监视器。只针对所选监控器的健康状态发送通知。
* 监控标签：选择一个或多个监控标记。只针对具有至少一个所选标记的监视器的健康状态发送通知。
* 组件类型：选择一个或多个组件类型。只针对所选类型组件的健康状态发送通知。
* 组件标签：选择一个或多个组件标记。只有当所选标记中的每个不同键至少有一个匹配值时，才会针对组件的健康状态发送通知。

.组件标记示例
[%collapsible]
====
假设所选标记为 [`k8s-scope:prod-us/checkout`,`k8s-scope:prod-emea/checkout`,`team:blue` ]。 这里的关键字是`k8s-scope` 和`team` 。

那么这些组件就会匹配：

* 带有标签 [`k8s-scope:prod-emea/checkout`,`team:blue` ] 的组件
* 带有标签 [`k8s-scope:prod-us/checkout`,`team:blue` ] 的组件

虽然这些组件不匹配：

* 带有标签的组件 [`k8s-scope:prod-emea/checkout` ]
* 带有标签 [`k8s-scope:prod-us/checkout`,`team:green` ] 的组件
* 带有标签 [`k8s-scope:prod-emea/carts`,`team:blue` ] 的组件
====

== 向何处发送通知？

SUSE Observability 可通过通道向不同的外部系统发送通知。支持的通道有

* xref:/use/alerting/notifications/channels/slack.adoc[Slack]- 向 Slack 发送通知
* xref:/use/alerting/notifications/channels/teams.adoc[团队]- 向 Microsoftxref:/use/alerting/notifications/channels/teams.adoc[团队]发送通知
* 网络xref:/use/alerting/notifications/channels/webhook.adoc[钩子]- 向网络钩子发送通知，网络钩子端点可将 SUSE Observability 有效载荷转换为任何所需的自定义第三方 API
* xref:/use/alerting/notifications/channels/opsgenie.adoc[Opsgenie]- 向 OpsGenie 发送通知

一般来说，SUSE Observability 会发送两种类型的通知消息：

. 当健康状态转为危急或偏离时，`open` 信息。当健康状态发生变化时，可重复发送此信息
. 当健康状态不再是 "危急 "或 "偏离"，或由于其他原因（组件消失、监视器被移除等）通知不再有效时，`close` 。
